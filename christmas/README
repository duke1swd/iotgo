Daemon to automate christmas lights.
Uses mqtt for both control and state

Note that all messages are to be sent as persistent unless otherwise noted.

mqtt hierarchy

christmas/<region>/#
  region is a set of lights that turn on and off at the same time.
  Examples might be "indoor" or "outdoor"

christmas/<region>/control
  Values are "auto", "manual-o", "manual-i"
  When "auto" lights are off outside the window, and on inside the window.
  More on window below.
  When "manual-*" lights are the oposite of the auto setting.
  If the state is "manual-o" and we are inside the window, or if
  the state is "manual-i" and we are outside the window, set the
  state to auto.

  There are various ways to set the "manual-*" state, including
  by button press on the plug devices.  If the button is set
  and we are in manual-*, set it to auto.  IF the button is set
  and we are in auto, set to manual-i if inside the window, and
  manual-o if we are outside the window.

christmas/<region>/state
  values are "on" and "off".  Current state of the lights.

christmas/<region>/window-start
  value is either "light", which means turn on at dusk or hh:mm.
  Time is on a 24 hour clock.  Default is "light"

christmas/<region>/window-end
  value is hh:mm.

christmas/<region>/devices
 payload is a comma separated list of devices in this region.
 Completely overwrites the previous list of devices.  Any devices
 that are in another region are moved to this one  Any devices
 that were in this region but not listed here are dropped.

christmas/<region>/drop
 this non persistent message causes the system to forget a region and
 all the devices in the region

christmas/season/start
  value is mm/dd.  Default is 11/1.

christmas/season/end
  value is mm/dd.  Default is 1/6.

christmas/enable
  value is true or false
